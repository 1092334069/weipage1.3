<html>
	<head>
		<meta charset="utf-8">
		<title>微页面</title>
		<style type="text/css">
			[v-cloak]{
				opacity:0;
			}
		</style>
		<link rel="stylesheet" href="../../src/css/iview/iview.css">
		<script src="../../src/js/jquery-1.12.4.min.js"></script>
		<script src="../../src/js/vue.js"></script>
		<script src="../../src/js/iview.min.js"></script>
	</head>
	<body>
		<div id="weipage" class="weipage" v-cloak>
			<div class="menu-page">
				<p class="menu-title">工具</p>
				<ul class="tool-list">
					<li @click="insertPlugin('panel')">面板</li>
					<li @click="insertPlugin('text')">文本</li>
					<li @click="insertPlugin('image')">图片</li>
					<li>视频</li>
					<li>表单</li>
				</ul>
				<p class="menu-title">快捷</p>
				<ul class="shortcut-list">
					<li @click="openPluginTreeModel('shortcut')">
						<img src="../../img/icon-tree.png" />
					</li>
				</ul>
			</div>
			<div class="view-page">
				<div class="view-page-head" @click="selectPlugin('')"></div>
				<div class="view-page-content">
					<template v-for="item in pluginList">
						<panel-view v-if="item.pluginType == 'panel'" :view-data="item" :select-plugin-id="selectPluginId"></panel-view>
						<text-view v-else-if="item.pluginType == 'text'" :view-data="item" :select-plugin-id="selectPluginId"></text-view>
						<image-view v-else-if="item.pluginType == 'image'" :view-data="item" :select-plugin-id="selectPluginId"></image-view>
					</template>
				</div>
			</div>
			<div class="edit-page" v-if="editForm">
				<ul class="tab-control">
					<li :class="{current: selectForm == 'base'}" @click="changeFormTab('base')">基础</li>
					<li :class="{current: selectForm == 'style'}" @click="changeFormTab('style')">样式</li>
					<li :class="{current: selectForm == 'event'}" @click="changeFormTab('event')">事件</li>
					<li :class="{current: selectForm == 'animation'}" @click="changeFormTab('animation')">动画</li>
					<li :class="{current: selectForm == 'statistics'}" @click="changeFormTab('statistics')">统计</li>
				</ul>
				<div class="remove-plugin" @click="removePlugin(editForm.pluginId)"></div>
				<template v-if="selectForm == 'base'">
					<panel-base-form v-if="editForm.pluginType == 'panel'" :form-data="editForm.base" @form-change="formChange" @open-interface-tree-model="openInterfaceTreeModel"></panel-base-form>
					<text-base-form v-else-if="editForm.pluginType == 'text'" :form-data="editForm.base" @form-change="formChange"></text-base-form>
					<image-base-form v-else-if="editForm.pluginType == 'image'" :form-data="editForm.base" @form-change="formChange"></image-base-form>
				</template>
				<template v-if="selectForm == 'style'">
					<panel-style-form v-if="editForm.pluginType == 'panel'" :form-data="editForm.style" @form-change="formChange"></panel-style-form>
				</template>
				<template v-if="selectForm == 'event'">
					<panel-event-form v-if="editForm.pluginType == 'panel'" :form-data="editForm.event" @form-change="formChange" @open-interface-model="openInterfaceModel" @open-plugin-tree-model="openPluginTreeModel"></panel-event-form>
				</template>
			</div>
			<div class="edit-page" v-else>
				<ul class="tab-control">
					<li class="current">微页面</li>
				</ul>
				<weipage-form :form-data="weipage" @weipage-change="weipageChange" @open-interface-model="openInterfaceModel" @delete-interface="deleteInterface"></weipage-form>
			</div>

			<Modal
				v-model="pluginTreeModel"
				title="插件树">
				<plugin-tree :plugin-list="pluginList" :select-plugin-id="selectPluginId" @plugin-tree-select="pluginTreeSelect"></plugin-tree>
			</Modal>

			<Modal 
				v-model="interfaceModel"
				title="接口列表">
					<i-table stripe :columns="interfaceTable" :data="interfaceTableData"></i-table>
			</Modal>

			<Modal
				v-model="interfaceTreeModel"
				title="接口树">
				<interface-tree :interface-list="interfaceTree" @select-interface-param="selectInterfaceParam"></interface-tree>
			</Modal>

		</div>
	</body>
</html>